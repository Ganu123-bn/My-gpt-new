<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart Green Grid – Carbon Credit Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 font-sans">

  <!-- Header -->
  <header class="bg-green-700 text-white p-5 shadow">
    <h1 class="text-2xl font-bold">Smart Green Grid – Carbon Credit Dashboard</h1>
    <p class="text-sm opacity-90">Live IoT Monitoring via ThingSpeak</p>
  </header>

  <!-- Dashboard -->
  <main class="p-6 grid grid-cols-1 md:grid-cols-4 gap-4">

    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-gray-500">Solar Voltage</p>
      <h2 id="voltage" class="text-2xl font-bold text-green-700">--</h2>
    </div>

    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-gray-500">Solar Current</p>
      <h2 id="current" class="text-2xl font-bold text-green-700">--</h2>
    </div>

    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-gray-500">Soil Moisture</p>
      <h2 id="soil" class="text-2xl font-bold text-green-700">--</h2>
    </div>

    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-gray-500">Air Quality</p>
      <h2 id="air" class="text-2xl font-bold text-green-700">--</h2>
    </div>

    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-gray-500">Temperature</p>
      <h2 id="temp" class="text-2xl font-bold text-green-700">--</h2>
    </div>

    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-gray-500">Humidity</p>
      <h2 id="humidity" class="text-2xl font-bold text-green-700">--</h2>
    </div>

    <div class="bg-white p-4 rounded-xl shadow md:col-span-2">
      <p class="text-gray-500">Tree Diameter</p>
      <h2 id="tree" class="text-2xl font-bold text-green-700">--</h2>
    </div>

  </main>

  <!-- ThingSpeak Integration -->
  <script>
    const CHANNEL_ID = "3215386";
    const READ_API_KEY = "HTT0XB0BJS6CLG8Z";

    const API_URL = `https://api.thingspeak.com/channels/${CHANNEL_ID}/feeds/last.json?api_key=${READ_API_KEY}`;

    async function loadIoTData() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();

        document.getElementById("voltage").innerText  = data.field1 + " V";
        document.getElementById("current").innerText  = data.field2 + " A";
        document.getElementById("soil").innerText     = data.field3 + " %";
        document.getElementById("air").innerText      = data.field4 + " AQI";
        document.getElementById("temp").innerText     = data.field5 + " °C";
        document.getElementById("humidity").innerText = data.field6 + " %";
        document.getElementById("tree").innerText     = data.field7 + " cm";

      } catch (error) {
        console.error("ThingSpeak data error:", error);
      }
    }

    // Initial load
    loadIoTData();

    // Refresh every 15 seconds
    setInterval(loadIoTData, 15000);
  </script>

</body>
</html>
